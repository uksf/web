<app-autofocus-stop></app-autofocus-stop>
<h2 mat-dialog-title>Discharge Request</h2>
<mat-dialog-content>
    <form #form="ngForm" (ngSubmit)="submit()">
        <div *ngIf="!accounts" class="spinner-container">
            <app-flex-filler></app-flex-filler>
            <mat-spinner></mat-spinner>
            <app-flex-filler></app-flex-filler>
        </div>
        <div *ngIf="accounts">
            <app-dropdown
                #accountName="ngModel"
                [(ngModel)]="model.account"
                [elementName]="'Recipient'"
                [elements]="accounts"
                [isRequired]="true"
                [placeholder]="'Select recipient'"
                id="accountName"
                name="formAccount"
            >
                <ng-template #element let-element>
                    {{ getAccountName(element) }}
                </ng-template>
            </app-dropdown>
            <app-text-input label="Reason" [(ngModel)]="model.reason" name="formReason" id="reason"
                [multiline]="true" [minRows]="1" [maxRows]="5" [required]="true"
                [validationMessages]="validationMessages.reason">
            </app-text-input>
        </div>
    </form>
</mat-dialog-content>
<mat-dialog-actions>
    <app-button (clicked)="submit()" [disabled]="!form.valid" [pending]="pending">Submit</app-button>
</mat-dialog-actions>
