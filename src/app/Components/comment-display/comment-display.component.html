<div class="comment-form" *ngIf="canPost">
    <form [formGroup]="commentForm">
        <mat-form-field>
            <textarea matInput placeholder="Enter comment" formControlName="commentContent" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="10" maxlength="1000" #message></textarea>
            <mat-hint *ngIf="message.value.length > 900">{{message.value.length}} / 1000</mat-hint>
        </mat-form-field>
    </form>
    <button mat-button (click)="postComment()" [disabled]="formHasText()" type="submit">Submit</button>
</div>
<br>
<div class="comments-container">
    <div class="comment-wrapper" *ngFor="let comment of comments">
        <div class="author">
            <span>
                <span class="author-string">{{comment.displayName}}</span>
                <span class="date-string">{{comment.timestamp | timeAgo}}</span>
            </span>
            <button class="menu-button" mat-button [matMenuTriggerFor]="menu" *ngIf="canDelete(comment)">
                <mat-icon>menu</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button class="menu-item" mat-menu-item (click)="deleteComment(comment)">Delete</button>
            </mat-menu>
        </div>
        <div class="comment">
            <span class="comment-string">{{comment.content}}</span>
        </div>
    </div>
</div>
