@use '@angular/material' as mat;

// Theme mixin for shared form-field components.
// $host-selector should match the component's element selector (e.g., 'app-text-input').
// Border color and style use CSS custom properties (--ff-border-color, --ff-border-style)
// to avoid specificity conflicts with Angular's emulated encapsulation.
@mixin form-field-theme($theme, $host-selector) {
    $foreground: map-get($theme, foreground);
    $primary: map-get($theme, primary);
    $warn: map-get($theme, warn);

    #{$host-selector} {
        --ff-border-color: #{mat.get-color-from-palette($foreground, divider)};

        .form-field-label {
            color: mat.get-color-from-palette($foreground, secondary-text);
        }

        .form-field input,
        .form-field textarea {
            color: mat.get-color-from-palette($foreground, base);

            &::placeholder {
                color: mat.get-color-from-palette($foreground, hint-text);
            }
        }

        .form-field-wrapper:hover:not(.form-field-disabled):not(.form-field-focused) {
            --ff-border-color: #{mat.get-color-from-palette($foreground, base)};
        }

        .form-field-focused {
            --ff-border-color: #{mat.get-color-from-palette($primary)};
        }

        .form-field-focused .form-field-label {
            color: mat.get-color-from-palette($primary);
        }

        // Must come after .form-field-focused so error color wins when both classes apply
        .form-field-has-error {
            --ff-border-color: #{mat.get-color-from-palette($warn)};
        }

        .form-field-has-error .form-field-label {
            color: mat.get-color-from-palette($warn);
        }

        .form-field-error {
            color: mat.get-color-from-palette($warn);
        }

        .form-field-clear {
            color: mat.get-color-from-palette($foreground, secondary-text);
        }

        .form-field-disabled {
            --ff-border-color: #{mat.get-color-from-palette($foreground, divider)};
            --ff-border-style: dashed;
        }

        .form-field-disabled .form-field input,
        .form-field-disabled .form-field textarea {
            color: mat.get-color-from-palette($foreground, disabled-text);
        }
    }
}
